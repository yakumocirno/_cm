# [AI對話](https://chatgpt.com/share/69597064-da4c-8005-b8c9-3598b65bf2b7)
# 幾何物件程式設計（Geometry Objects in Python）

## 一、專案目標

本專案使用 **Python** 實作平面幾何中的基本物件與運算，結合  
**解析幾何、向量、線性代數與仿射變換**，完成以下目標：

1. 定義幾何物件  
   - 點 `Point`
   - 直線 `Line`
   - 圓 `Circle`
   - 三角形 `Triangle`

2. 幾何計算功能  
   - 兩直線交點  
   - 兩圓交點  
   - 直線與圓交點  
   - 給定直線與線外點，作垂線並求垂足  

3. 利用  
   - 線上點 A  
   - 線外點 P  
   - 垂足 H  
   所形成的直角三角形，驗證 **畢氏定理**

4. 對所有幾何物件進行  
   - 平移（Translation）  
   - 等比例縮放（Scaling）  
   - 旋轉（Rotation）  

5. 在程式碼註解中說明每個功能背後的數學原理

---

## 二、使用的數學觀念

### 1. 向量與內積

在程式中，「點」同時被視為 **位置向量**：

\[
P = (x, y)
\]

內積定義為：

\[
\vec{u} \cdot \vec{v} = u_x v_x + u_y v_y
\]

用途：
- 判斷垂直（內積為 0）
- 計算投影
- 距離平方（避免不必要的開根號）

---

### 2. 直線的一般式表示法

直線以解析幾何的一般式表示：

\[
ax + by + c = 0
\]

優點：
- 不需處理斜率無限大的情況
- 適合做距離、投影與交點計算

對應向量：
- 法向量：\((a, b)\)
- 方向向量：\((b, -a)\)

---

### 3. 兩直線交點（聯立方程）

解聯立方程：

\[
\begin{cases}
a_1 x + b_1 y + c_1 = 0 \\
a_2 x + b_2 y + c_2 = 0
\end{cases}
\]

使用 **克拉瑪法則**：

\[
D = a_1 b_2 - a_2 b_1
\]

- \(D = 0\)：平行或重合，無唯一交點  
- \(D \neq 0\)：存在唯一交點  

---

### 4. 點到直線的投影（垂足）

給定點 \(P(x_0, y_0)\) 與直線：

\[
ax + by + c = 0
\]

垂足 \(H\) 的公式為：

\[
H = P - \vec{n}\frac{ax_0 + by_0 + c}{a^2 + b^2}
\]

其中 \(\vec{n} = (a, b)\) 為直線法向量。

---

### 5. 垂線的構造

原直線方向向量為：

\[
\vec{d} = (b, -a)
\]

垂線的法向量可直接取為 \(\vec{d}\)，  
再代入通過指定點即可得到垂線方程。

---

### 6. 直線與圓的交點

計算流程：

1. 圓心 \(O\) 到直線的垂足為 \(H\)
2. 計算距離 \(d = |OH|\)
3. 比較 \(d\) 與半徑 \(r\)

結果：
- \(d > r\)：無交點  
- \(d = r\)：相切（1 個交點）  
- \(d < r\)：兩個交點  

交點位置為：

\[
H \pm \sqrt{r^2 - d^2} \cdot \text{方向單位向量}
\]

---

### 7. 兩圓交點

令兩圓圓心距為 \(d\)：

- \(d > r_1 + r_2\)：無交點  
- \(d < |r_1 - r_2|\)：無交點  
- \(d = r_1 + r_2\)：外切  
- \(d = |r_1 - r_2|\)：內切  

其餘情況下，交點位於連心線的垂直方向上。

---

### 8. 畢氏定理的數值驗證

使用以下三點形成三角形：

- \(P\)：線外點  
- \(H\)：垂足  
- \(A\)：直線上的另一點  

由於 \(PH \perp HA\)，形成直角三角形：

\[
PH^2 + HA^2 = PA^2
\]

程式中以浮點誤差容許範圍內進行驗證。

---

### 9. 仿射變換（Affine Transformations）

#### 平移（Translation）

\[
(x, y) \rightarrow (x + dx, y + dy)
\]

#### 等比例縮放（Scaling）

\[
P' = C + s(P - C)
\]

其中 \(C\) 為縮放中心。

#### 旋轉（Rotation）

使用旋轉矩陣：

\[
\begin{bmatrix}
\cos\theta & -\sin\theta \\
\sin\theta & \cos\theta
\end{bmatrix}
\]

---

## 三、程式設計重點

- 使用 `@dataclass(frozen=True)`  
  → 幾何物件不可變，避免副作用
- 所有幾何運算皆回傳新物件
- 使用 `EPS` 處理浮點誤差
- 線的變換以「兩點重建法」確保正確性
- 圓僅支援 **等比例縮放**，避免退化成橢圓

---

## 四、結論

本專案展示了如何將高中與大學初階數學中的幾何觀念：

- 向量
- 解析幾何
- 聯立方程
- 線性代數
- 仿射變換  

完整地對應到實際可執行的程式碼，  
同時驗證理論（如畢氏定理）與實作結果的一致性。

此架構亦可作為：
- 電腦圖學基礎
- 幾何引擎原型
- 數學與程式整合教學範例
