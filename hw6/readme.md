# [ai對話](https://chatgpt.com/share/695a7bfb-fb08-8005-b64d-b479e87548e2)
## 背後的數學（對應到程式在做什麼）

### 1) 點 = 向量

* 點 `(x,y)` 同時可視為向量
* 距離：|P−Q| = √((x1−x2)²+(y1−y2)²)
* 內積 `dot`：判斷垂直

  * 兩向量 `u·v = 0` ⇔ 垂直
* 外積（2D 用純量表示）`cross`：算面積

  * 三角形面積 = 1/2 |(b−a)×(c−a)|

### 2) 直線用一般式 `ax+by+c=0`

* 兩線交點：解二元一次聯立（Cramer 法）
* 線的方向向量可取 `(b, -a)`（因為它和法向量 `(a,b)` 垂直）

### 3) 點到直線的垂足（投影）

對直線 `ax+by+c=0`，點 `p=(x,y)`
令 `t = (ax+by+c)/(a²+b²)`
則垂足：

* `x' = x - a t`
* `y' = y - b t`

### 4) 垂線

若原線法向量 `(a,b)`，其方向向量 `(b,-a)`
垂線的**法向量**可以取 `(b,-a)`（因為垂線方向要和原線方向垂直）

### 5) 線與圓交點（幾何法）

* 先算圓心到直線距離 `d`

  * d>r：無交點
  * d=r：切點（1 點）
  * d<r：2 交點
* 先取圓心到線的垂足 `foot`
* 再沿著線的單位方向向量前後走 `t = √(r²-d²)` 得到兩交點

### 6) 兩圓交點（圓圓相交幾何）

* 兩圓心距 `d`
* 用幾何分解成：

  * 從 c1 圓心往 c2 方向走 `a`
  * 再垂直偏移 `h`
  * 得到 0/1/2 個交點

### 7) 平移、縮放、旋轉（剛體/相似變換）

* 平移：`p' = p + (dx,dy)`
* 縮放（以中心 c）：`p' = c + s(p-c)`
* 旋轉（以中心 c）：

  * `p' = c + R(θ)(p-c)`
  * `R(θ) = [[cosθ,-sinθ],[sinθ,cosθ]]`